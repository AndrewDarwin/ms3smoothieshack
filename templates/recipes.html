{% extends "base.html" %}
{% block content %}

<div class="title-style">
    <h4>Recipes</h4>
</div>

{% for recipe in recipes %}
<div class="container recipe-card">
    <div class="row s12">
        <div class="col s12">
            <h5>{{ recipe.recipe_name }}</h5>
        </div>
        <div class="col s12 m6"> 
            <img class="img_recipe" src="{{recipe.img_url}}" alt="recipe_image">
    </div>
        <div class="col s12 m6">
            <p><em>{{ recipe.user_id }}</em></p><br>
            <p><b>Category:</b> {{recipe.category_name}}</p>
            <p><b>Prep Time:</b> {{ recipe.prep_time }}</p>
            <p><b>Description:</b> {{ recipe.description }}</p>
        </div>
    </div>
    <div class="row s12">
        <div class="col s12 m6">
            <h5>Ingredients</h5>
            <ul>
                {% for list in recipe.ingredients.splitlines() %}
                    <li>
                        <p><i class="fas fa-circle"></i> {{list}}</p>    
                    </li>
                {% endfor %}
            </ul> 
        </div>
        <div class="col s12 m6">
            <h5>Instructions</h5>
            <ol>
                {% for steps in recipe.instructions.splitlines() %}
                    <li>
                        <p>{{steps}}</p>
                    </li>
                {% endfor %}
            </ol> 
        </div>
    </div>
    <div class="s12">
        {% if session.user|lower == recipe.user_id|lower %}
        <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}"
            class="waves-effect waves-light btn-small button-style">Edit</a>
        <a class="waves-effect waves-light btn-small modal-trigger button-style" href="#modal1">Delete</a>
        <!-- Modal Structure -->
        <div id="modal1" class="modal">
            <div class="modal-content">
                <h5>Are you sure you want to delete this recipe?</h5>
                <p>If you delete this recipe, there's no going back. It'll be gone, GONE FOREVER!!!!! </p>
                <p>Well, you could add it again but you get the point!</p>
            </div>
            <div class="modal-footer">
                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}"
                    class="modal-close waves-effect waves-light btn-small button-style">Delete</a>
                <a href="{{ url_for('search') }}"
                    class="modal-close waves-effect waves-light btn-small button-style">Cancel</a>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endfor %}
{% endblock %}